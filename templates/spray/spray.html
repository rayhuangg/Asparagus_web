{% extends '../layout.html' %}

{% block body %}


<div id="vehicle-data">
    <!-- Display the vehicle data here -->
</div>

<button class="btn btn-primary" id="refresh-button">Refresh</button>

<script>
    // Function to fetch and display vehicle data
    function getVehicleData() {
        // Make an API call to fetch the data
        fetch('GetVehicleData/')
            .then(response => response.json())
            .then(data => {
                // Display the data in the 'vehicle-data' div
                const vehicleDataDiv = document.getElementById('vehicle-data');
                if (data.error) {
                    vehicleDataDiv.innerHTML = data.error;
                } else if (data.uwb_coordinates && data.uwb_coordinates.length > 0) {
                    // Display the data in the 'vehicle-data' div
                    vehicleDataDiv.innerHTML = `
                        <p>UWB coordinates: ${data.uwb_coordinates}</p>
                        <p>Battery: ${data.battery_level}</p>
                        <p>Sprayed: ${data.sprayed_pesticide}</p>
                        <p>Remaining pesticide: ${data.remaining_pesticide}</p>
                        <!-- Add more data fields here -->
                    `;
                } else {
                    vehicleDataDiv.innerHTML = 'NO RECENT DATA';
                }
                console.log(data); // Log the fetched data to the console
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }

    // Add event listener to the API button
    const apiButton = document.getElementById('refresh-button');
    apiButton.addEventListener('click', getVehicleData);
</script>


{% endblock %}